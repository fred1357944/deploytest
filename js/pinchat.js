var pinChatInit=function(){var t="https://pinchat.me";let n,e={},i=!1,o=0;class a{constructor(){this.data={}}setItem(t,n){this.data[t]=n}getItem(t){return this.data[t]}removeItem(t){delete this.data[t]}contains(t){return t in this.data}clear(){this.storage.clear()}}try{n=window.localStorage}catch{n=new a}function r(t,n){var e,i,o=t.split("&");for(i=0;i<o.length;i++)if((e=o[i].split("="))[0]===n)return void 0===e[1]||decodeURIComponent(e[1])}function l(t,n){var e=document.getElementById(t);if(window.getComputedStyle)var i=document.defaultView.getComputedStyle(e,null).getPropertyValue(n);else e.currentStyle&&(i=e.currentStyle[n]);return i}for(var s=document.getElementsByTagName("script"),d=null,p=0;p<s.length;p++)-1!==s[p].src.indexOf("pinchat.js")&&(d=p);var c=s[d].src.replace(/^[^\?]+\??/,"");let m=r(c,"token"),g=r(c,"color")||"#00B33D",h="#ffffff",u="Contact Us",f=null,x="circle",b=r(c,"regToken"),w=r(c,"name"),y=r(c,"notifyPhone"),k=r(c,"notifyEmail"),F=r(c,"openNotify");var v=document.querySelector("body").style.overflow,I=document.querySelector("body").style.height;let _=0,B=!1,S="";function $(t){document.getElementById("pinChatBubble").contains(t.target)||T(t)}function T(t){t.stopPropagation(),document.querySelector("#widget-room-counts-wrap").classList.add("hidden");var n=document.getElementById("imkitFloatButton");n.classList.toggle("open"),null!=document.querySelector("body-inner")&&document.querySelector(".body-inner").classList.toggle("height-100vh");let e=n.classList.contains("open")||!1;if(!0===e&&(document.querySelector("#widget-room-counts-wrap").style.display="none"),1==e&&q(),document.querySelector("#imkitFloatIframe iframe").contentWindow.postMessage(JSON.stringify({pinchat_type:"actions",data:{widget_open:e,sub_action:"widget_open"}}),"*"),1==e&&0==i)var a=setInterval((function(){document.querySelector("#imkitFloatIframe iframe").contentWindow.postMessage(JSON.stringify({pinchat_type:"actions",data:{is_widget_click:!0,widget_open:e,sub_action:"is_widget_click"}}),"*"),1==i&&0==o&&(o=(new Date).getTime()),1==i&&(new Date).getTime()>o+1e4&&clearInterval(a)}),1e3);var r=document.getElementById("imkitFloatIframe");r.classList.toggle("open"),document.querySelector("#imkitFloatIframe").style.display="rgb(0 0 0 / 25%) 0px 4px 20px",r.classList.contains("open")?("mobile"==C()&&(document.querySelector("body").style.overflow="hidden",document.querySelector("body").style.height="100vh"),window.addEventListener("click",$)):("mobile"==C()&&(document.querySelector("body").style.overflow=v,document.querySelector("body").style.height=I),window.removeEventListener("click",$))}function C(){let t=window.screen.width;return t<768?"mobile":t<1025?"tablet":"desktop"}function q(){0==B&&""!=S&&(B=!0,_=(new Date).getTime(),document.getElementById("iframe-wrap").innerHTML=S)}function z(){if(!document.getElementById("imkitFloatButton")){var n=document.createElement("Div");n.setAttribute("id","pinChatBubble"),document.body.insertBefore(n,document.body.firstChild);var i=`${t}/chat.html?room=${m}&isWidget=true&hideHeader=false`;b&&(i=`${i}&regToken=${b}`),w&&(i=`${i}&name=${w}`),y&&(i=`${i}&notifyPhone=${y}`),k&&(i=`${i}&notifyPhone=${k}`),F&&(i=`${i}&notifyPhone=${F}`);var o=window.location!=window.parent.location?document.referrer:document.location.href;if(o&&(i=`${i}&domain=${/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/?\n]+)/g.exec(o)[1]}`),"rectangle"==x||"full"==x||"rectangle_left"==x){let n=" ";"full"==x&&(n=" style='\n          left: 0;\n          right: 0;\n          width: calc(100% - 60px);\n          margin: 0 auto;\n          margin-left: 30px;\n          display: flex;\n          justify-content: center;\n          box-shadow:rgb(0 0 0 / 25%) 0px 4px 20px !important;\n        ' ");let i="";i="rectangle_left"==x?`<img class='not_circle' style="margin-left:0;margin-right:7px;" src="${f||`${t}/dashboardV2/images/chat_logo.png`}">\n        <span id="imkitFloatButtonTitle">${u.substring(0,15)}${u.length>15?"...":""}</span>`:`<span id="imkitFloatButtonTitle">${u.substring(0,15)}${u.length>15?"...":""}</span>\n        <img class='not_circle' src="${f||`${t}/dashboardV2/images/chat_logo.png`}">`,document.getElementById("pinChatBubble").innerHTML=`\n    <span id="imkitFloatButton" class="" ${n} style="box-shadow:rgb(0 0 0 / 25%) 0px 4px 20px !important;">\n        ${i}\n        <span id="widget-room-counts-wrap" class="hidden" style="display:none;position:absolute;top: -8px;right: -8px;border-radius: 10px;border:1px solid white;"><span  id="widget-room-counts" style="background: #ff4d4f;width: 19px;height: 19px;border-radius: 10px;display: block;line-height: 20px;color: white;font-size: 12px;">0</span></span>\n        <span id="imkitFloatButtonClose"><svg height="60" viewBox="0 0 48 48" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"></path><path d="M0 0h48v48h-48z" fill="none"></path></svg></span>\n    </span>\n    <span id="imkitFloatIframe" class="widget_type_${x}"><span id="iframe-wrap"></span><span id="imkitFloatIframeHide"><svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg" fill="${e.chat.colors.header.color||"#00b33d"}"><path d="M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"></path><path d="M0 0h48v48h-48z" fill="none"></path></svg></span></span>\n    `}else"circle"==x&&(document.getElementById("pinChatBubble").innerHTML=`\n      <span id="imkitFloatButton"  style="width:initial;height:initial;color:initial;line-height:initial;background-color:initial;padding:0;" >\n        <span class="" style="box-shadow:rgb(0 0 0 / 25%) 0px 4px 20px !important;display: flex;justify-content: center;align-items: center;border-radius: 50%; width: 60px; height: 60px; background-color: ${g} ;color: ${h}; "><img style=''  src="${f||`${t}/dashboardV2/images/chat_logo.png`}" width="40" height="40"></span>              \n        <span id="widget-room-counts-wrap" class="hidden" style="display:none;position:absolute;top: -3px;right: -3px;border-radius: 10px;border:1px solid white;"><span  id="widget-room-counts" style="    background: #ff4d4f;width: 19px;height: 19px;border-radius: 10px;display: block;line-height: 20px;color: white;font-size: 12px;">0</span></span>\n        <span id="imkitFloatButtonClose"><svg height="60" viewBox="0 0 48 48" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"></path><path d="M0 0h48v48h-48z" fill="none"></path></svg></span>\n      </span>\n      <span id="imkitFloatIframe" class="widget_type_${x}"><span id="iframe-wrap"></span><span id="imkitFloatIframeHide"><svg height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg" fill="${e.chat.colors.header.color||"#00b33d"}"><path d="M38 12.83l-2.83-2.83-11.17 11.17-11.17-11.17-2.83 2.83 11.17 11.17-11.17 11.17 2.83 2.83 11.17-11.17 11.17 11.17 2.83-2.83-11.17-11.17z"></path><path d="M0 0h48v48h-48z" fill="none"></path></svg></span></span>\n      `);document.getElementById("imkitFloatButton").addEventListener("click",T),document.getElementById("imkitFloatIframeHide").addEventListener("click",T),S=`<iframe src="${i}" allow="geolocation;microphone"></iframe>`,setTimeout((()=>{q()}),4e3),function(t){const n=document.createElement("style");n.textContent=t,document.head.append(n)}(`\n    #pinChatBubble {\n      position: absolute;\n      z-index: 9999;      \n    }\n    #imkitFloatButtonIcon {\n      padding-left: 7px;\n    }\n    #imkitFloatButton {      \n      bottom:30px !important;\n      right:30px !important;\n      box-sizing: border-box;\n      user-select: none;\n      display: flex;\n      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n      font-size: 20px;\n      height: 50px;\n      line-height: 60px;\n      background-color: ${g};\n      color: #444;\n      text-align: center;\n      border-radius: 8px;\n      cursor: pointer;\n      position: fixed;\n      bottom: 50px;\n      right: 50px;\n      z-index: 201;\n      align-items: center;\n      justify-content: space-between;\n      padding: 14px;\n      /* box-shadow: 0 1px 6px rgba(0, 0, 0, 0.06), 0 2px 32px rgba(0, 0, 0, 0.16); */ }\n      #imkitFloatButton.open {\n        z-index: 200;}\n      #imkitFloatButton.open #imkitFloatButtonClose {\n        transform: scale(1);display:none; }\n      #imkitFloatButton #imkitFloatButtonIcon {\n        display: block;\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        transition: transform 0.3s;\n      }\n      #imkitFloatButton img.not_circle {\n        width: 30px;\n        margin-left: 7px;\n      }\n      #imkitFloatButton #imkitFloatButtonTitle {\n        font-size: 16px;\n        color: ${h};\n        white-space : nowrap;\n      }\n      #imkitFloatButton #imkitFloatButtonClose {\n        position: absolute;\n        left: 0;\n        top: 0;\n        fill: #444;\n        transition: transform 0.3s;\n        transform: scale(0); }\n        #imkitFloatButton #imkitFloatButtonClose svg {\n          display: block;\n          width: 20px;\n          height: 20px;\n          padding: 15px; }\n    @media (max-width: 616px) {\n      #imkitFloatButton {\n        transform-origin: top right;\n      }\n    }\n    #imkitFloatTitle {\n      font-family: "Roboto Condensed", 微軟正黑體, "Microsoft JhengHei";\n      font-weight: bold;\n      cursor: pointer;\n      display: block;\n      position: fixed;\n      right: 50px;\n      width: 250px;\n      border-radius: 10px 10px 0 0;\n      bottom: 0;\n      text-align: left;\n      padding: 14px 0 9px 20px;\n      background-color: ${g};\n      color: #444;\n      transition: opacity 0.2s;\n      opacity: 0;\n      z-index: 3;\n      pointer-events: none;\n      box-shadow: 0 1px 6px rgba(0, 0, 0, 0.06), 0 2px 32px rgba(0, 0, 0, 0.16);\n      font-size: 14px;\n      line-height: 17px;\n      box-sizing: border-box; }\n      #imkitFloatTitle:hover {\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.09), 0 4px 40px rgba(0, 0, 0, 0.24); }\n        #imkitFloatTitle:hover #imkitFloatTitleHide {\n          fill: #444; }\n      #imkitFloatTitle.open {\n        opacity: 1;\n        pointer-events: auto; }\n      #imkitFloatTitle.badge:after {\n        content: '';\n        display: inline-block;\n        width: 10px;\n        height: 10px;\n        vertical-align: middle;\n        background-color: #F00;\n        border-radius: 50%;\n        margin-left: 5px; }\n      #imkitFloatTitle #imkitFloatTitleHide {\n        display: block;\n        width: 30px;\n        height: 30px;\n        position: absolute;\n        top: calc(50% - 14px);\n        right: 10px;\n        cursor: pointer;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 5px;\n        border-radius: 5px;\n        fill: transparent; }\n        #imkitFloatTitle #imkitFloatTitleHide svg {\n          width: 100%;\n          height: 100%;\n          display: block;\n          position: relative;\n          transition: transform 0.3s;\n          transform: rotate3d(0, 0, 1, 0deg); }\n        #imkitFloatTitle #imkitFloatTitleHide:hover {\n          background-color: rgba(0, 0, 0, 0.2); }\n          #imkitFloatTitle #imkitFloatTitleHide:hover svg {\n            transform: rotate3d(0, 0, 1, 360deg); }\n    \n    #imkitFloatIframe {\n      user-select: none;\n      display: block;\n      position: fixed;\n      background-color: #fff;\n      right: 50px;\n      width: 370px;\n      border-radius: 10px;\n      overflow: hidden;\n      box-shadow: 0 5px 40px rgba(0, 0, 0, 0.16);\n      pointer-events: none;\n      opacity: 0;\n      bottom: calc(50px - 70px - 10px);\n      height: calc(100% - 50px - 70px - 50px - 10px);\n      z-index: 200; \n    }\n      #imkitFloatIframe.open {\n        transition: opacity 0.2s, height 0.2s, bottom 0.2s;\n      }\n      #imkitFloatIframe .roomHeaderText {\n        margin-bottom: -6px;\n      }\n      #imkitFloatIframe.loading:before {\n        content: '';\n        background: #FFF;\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%; }\n      #imkitFloatIframe.loading:after {\n        content: '';\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        margin-left: -15px;\n        margin-top: -15px;\n        height: 30px;\n        width: 30px;\n        border-style: solid;\n        border-width: 3px;\n        border-color: #ccc #ccc transparent;\n        -webkit-animation: spin-pageload 0.75s linear infinite;\n        animation: spin-pageload 0.75s linear infinite;\n        display: inline-block;\n        border-radius: 100%;\n        background: transparent;\n        box-sizing: initial;\n        vertical-align: middle; }\n      #imkitFloatIframe.open {\n        pointer-events: auto;\n        opacity: 1;\n        bottom: calc(122px);\n        height: 75vh;\n        max-height: 710px; }\n      #imkitFloatIframe.open.widget_type_circle{\n          bottom: calc(110px);\n          right: calc(30px);\n        }\n      #imkitFloatIframe.open.widget_type_full{\n     \n          right: calc(30px);\n          bottom: calc(100px);\n        }\n        #imkitFloatIframe.open.widget_type_rectangle,#imkitFloatIframe.open.widget_type_rectangle_left{\n     \n          right: calc(30px);\n          bottom: calc(100px);\n        }\n        \n      #imkitFloatIframe #imkitFloatIframeClose,\n      #imkitFloatIframe #imkitFloatIframeHide {\n        display: block;\n        width: 30px;\n        height: 30px;\n        position: absolute;\n        top: 11px;\n        cursor: pointer;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 5px;\n        border-radius: 5px; }\n        #imkitFloatIframe #imkitFloatIframeClose svg,\n        #imkitFloatIframe #imkitFloatIframeHide svg {\n          width: 100%;\n          height: 100%;\n          display: block;\n          position: relative; }\n        #imkitFloatIframe #imkitFloatIframeClose:hover,\n        #imkitFloatIframe #imkitFloatIframeHide:hover {\n          background-color: rgba(0, 0, 0, 0.2); }\n      #imkitFloatIframe #imkitFloatIframeClose {\n        right: 40px;\n        stroke: #444; }\n        #imkitFloatIframe #imkitFloatIframeClose svg {\n          transition: top 0.1s;\n          top: -6px; }\n        #imkitFloatIframe #imkitFloatIframeClose:hover svg {\n          top: 0px; }\n      #imkitFloatIframe #imkitFloatIframeHide {\n        right: 10px;\n        fill: #444; }\n        #imkitFloatIframe #imkitFloatIframeHide svg {\n          transition: transform 0.3s;\n          transform: rotate3d(0, 0, 1, 0deg); }\n        #imkitFloatIframe #imkitFloatIframeHide:hover svg {\n          transform: rotate3d(0, 0, 1, 360deg); }\n      #imkitFloatIframe iframe {\n        background-color: #fff;\n        width: 100%;\n        height: 100%;\n        border: none; }\n    \n    @media only screen and (max-width: 600px) {\n      #imkitFloatIframe.open.widget_type_full {\n        right:0;\n        bottom:0;\n      }\n      #imkitFloatIframe.open.widget_type_circle{\n        bottom: 0;\n        right: 0;\n      }\n      #imkitFloatIframe.open.widget_type_rectangle,#imkitFloatIframe.open.widget_type_rectangle_left{\n        bottom: 0;\n        right: 0;\n      }\n      #imkitFloatTitle {\n        right: 0;\n        width: 100%; }\n      #imkitFloatIframe {\n        right: 0;\n        width: 100%;\n        bottom: 0;\n        height: 100%;\n        border-radius: 0; }\n        #imkitFloatIframe.open {\n          bottom: 0;\n          height: 100%; \n          max-height: 100%;\n        } \n      }\n      \n    \n    @keyframes imkitFloatButtonHover {\n      0% {\n        transform: scale(1); }\n      50% {\n        transform: scale(1.1); }\n      100% {\n        transform: scale(1); } }\n    \n    @-webkit-keyframes spin-pageload {\n      0% {\n        -webkit-transform: rotate(0deg); }\n      100% {\n        -webkit-transform: rotate(360deg); } }\n    \n    @keyframes spin-pageload {\n      0% {\n        transform: rotate(0deg); }\n      100% {\n        transform: rotate(360deg); } }\n    `)}}if(window.addEventListener("message",(function(t){let n=null;if("string"!=typeof t.data)return!1;try{n=JSON.parse(t.data)}catch(t){return!1}if(null==n)return!1;if(!n.pinchat_type)return!1;switch(n.pinchat_type){case"counts":!function(t){let n=document.getElementById("imkitFloatButton").classList.contains("open");0==t?(document.querySelector("#widget-room-counts").innerHTML=t,document.querySelector("#widget-room-counts-wrap").style.display="none"):(document.querySelector("#widget-room-counts").innerHTML=t,document.querySelector("#widget-room-counts-wrap").style.display=!1===n?"block":"none")}(n.data.counts||0);break;case"is_receive_widget_click":let t=document.getElementById("imkitFloatButton").classList.contains("open");document.querySelector("#imkitFloatIframe iframe").contentWindow.postMessage(JSON.stringify({pinchat_type:"actions",data:{is_widget_click:!0,widget_open:t,sub_action:"is_widget_click"}}),"*"),i=!0}})),null!=document.querySelector("#branding")&&"9999"==l("branding","z-index")&&(document.querySelector("#branding").style.zIndex=9998),null!=document.querySelector("#wpfront-notification-bar-spacer")&&"99999"==l("wpfront-notification-bar-spacer","z-index")&&(document.querySelector("#wpfront-notification-bar-spacer").style.zIndex=9998),document.querySelector('meta[name="viewport"]')){var H=document.querySelector('meta[name="viewport"]').content.split(",");for(var E in H)H[E]=H[E].trim();0==H.includes("maximum-scale=1")&&(document.querySelector('meta[name="viewport"]').content=document.querySelector('meta[name="viewport"]').content+",maximum-scale=1")}else{var L=document.createElement("meta");L.httpEquiv="viewport",L.content="width=device-width, initial-scale=1, maximum-scale=1",document.getElementsByTagName("head")[0].appendChild(L)}var M;(M=new Headers).append("Content-Type","application/json"),fetch("https://api.pinchat.me/api/en/chat/guest/config/"+m,{method:"POST",headers:M}).then((t=>t.text())).then((t=>{var n=(t=JSON.parse(t)).data.data;g=n.chat.colors.float_button_color||"#02B13F",h=n.chat.colors.float_button_text_color||"#FFFFFF",u=n.chat.colors.float_button_text||"Contact Us",f=n.chat.widget_logo,x=n.chat.widget_type||"circle",e=n,z()})).catch((t=>console.log("error",t)))};window.onload=function(){pinChatInit()};